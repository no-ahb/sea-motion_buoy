# TODO: Ocean Motion Sensing Buoy
*Active development & task tracking — maintained by agents*

**Last updated:** [Auto-updated by agents]

---

## To Do Now (go through this, erase any tasks completed, add them to the changelog, update "last updated" with brief memo of tasks completed, renumber or edit remaining tasks )
1. check calibration on boot, should it be changed?
2. what is this: Power-safe block flushing and optional CRC (planned)
3. u


---

## Task Whiteboard (ideas for later implementation)
1. Enhance Desktop Decoder 
* Parse header → compute true sample rate → CSV export.
* Validate quaternion normalization and report mean norm.
* Plot optional quick-look graphs (acceleration, orientation).
* Output metadata: recording duration, sample count, rate stats.

2. Implement Post-Processing Workflow
* Compute **Up vector** from quaternion → project linear accel → `a_z`.
* Apply **high-pass (0.03–0.07 Hz)** and integrate twice → displacement.
* Downsample → normalize → output CSV for stepper playback.

### Firmware

* [x] Integrate double-buffer + block write system for stable 100–200 Hz logging.
* [x] Add "effective sample rate" metadata to log or sidecar file.
* [ ] Add optional CRC per block for data integrity.
* [ ] Optimize power (reduce SD writes, limit LED use during idle).
* [x] Retain LED/button FSM (bias → ready → recording → stop).

### Decoder & Processing
* [ ] Extend decoder to export CSV / NumPy formats.
* [ ] Add metadata extraction (session length, sample count, rate).
* [ ] Implement optional plotting for QA (accel, quaternion norm).
* [ ] Add basic displacement reconstruction (time- or frequency-domain).

### Testing
* [ ] Measure true sampling rate under different block sizes.
* [ ] Verify bias stability after 20 s still phase.
* [ ] Confirm linear accel ≈ 0 at rest.
* [ ] Validate data integrity over 10 h runs.

### Documentation
* [ ] Document calibration / bias routine.
* [ ] Record measured power draw and runtime.

### Hardware
* [ ] Finalize 10–15 cm buoy hull design.
* [ ] Document waterproofing and internal mounting.
* [ ] Create assembly instructions.

---

## Feature Suggestions

### Short-Term
* Add recording metadata (device ID, start time, duration) to header.
* Add LED “error” pattern (fast blink) for SD/IMU init failures.

### Long-Term
* Add gyro or temperature channels for QA.
